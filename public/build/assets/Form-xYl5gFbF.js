import{C as w,p as g,D as P,A as k,E as L,d as T,c as v,a as e,b as s,w as p,u as a,g as x,y as C,o as b,F as j,B as K,t as S}from"./app-DVAy74J0.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-DO5GoqV3.js";import{_ as D}from"./MainCard.vue_vue_type_script_setup_true_lang-C9haPG2r.js";import{_ as o}from"./FormInput.vue_vue_type_script_setup_true_lang-e8DHvsaz.js";import{_ as N}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CLyCCfDn.js";import{_ as B,a as O,b as V,c as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-DtxPZ5bh.js";import{l as E,a as M}from"./listLokasi-K6I4t6oy.js";import{_ as y}from"./FormSelect.vue_vue_type_script_setup_true_lang-CLNqqZsC.js";import{_ as W}from"./AsyncSelect.vue_vue_type_script_setup_true_lang-ItFXem_x.js";import"./useForwardExpose-C1-_LDBZ.js";import"./VisuallyHidden-DLlhVkqA.js";import"./RovingFocusGroup-BY3No4xc.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-4Ns3tNZl.js";import"./createLucideIcon-DGwP7lsq.js";import"./Label.vue_vue_type_script_setup_true_lang-4T3hDGU5.js";import"./Input.vue_vue_type_script_setup_true_lang-Bw71HXP9.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-BhuIM6IS.js";import"./check-CsjKJpbl.js";import"./VisuallyHiddenInput-Drg0D-fG.js";function A(){const u=w(),m=g(()=>u.props.lamp_types)??[],l=g(()=>u.props.data),d=g(()=>u.props.list_jalan),i=P({lokasi:"",kode:"",jalan_id:null,jenis_simpang:"",tahun_pemasangan:0,latitude:"",longitude:"",pengaturan_fase:null,tipe_tiang:"",keterangan:"",list_lampu:[...m.value.map(r=>({type:r,durasi:0}))]}),_=k([{name:"1",value:"1"},{name:"2",value:"2"},{name:"3",value:"3"},{name:"4",value:"4"},{name:"5",value:"5"}]),c=k("Create Traffic"),f=async()=>{l.value?.id==null?i.post("/lalin/warning/"):i.put("/lalin/warning/"+l.value?.id)};return console.log(l),L(()=>u.props.data,r=>{if(r){const h=r;i.defaults(r),Object.assign(i,h)}},{immediate:!0}),{form:i,onSubmit:f,title:c,data:l,list_lampu:m,list_pengaturan_fase:_,list_kondisi:M,list_jalan:d,list_lokasi:E}}const I={class:"bg-muted/40 w-full"},U={class:"col-span-2 space-y-1"},q={class:"col-span-2 space-y-1"},z={class:"col-span-2 space-y-1"},G={class:"col-span-2 space-y-1"},H={class:"space-y-1 col-span-2"},Q={class:"space-y-1 col-span-2"},R={class:"space-y-1 col-span-2"},X={class:"space-y-1 col-span-2"},Y={class:"space-y-1 col-span-2"},Z={class:"space-y-1 col-span-2"},aa={class:"grid grid-cols-1 gap-2"},la={class:"space-y-1 col-span-2"},sa={class:"space-y-1 col-span-2"},ea={class:"col-span-2 flex justify-end pt-2"},$a=T({__name:"Form",setup(u){const{onSubmit:m,form:l,title:d,list_pengaturan_fase:i,list_lampu:_,list_kondisi:c,list_jalan:f,list_lokasi:r}=A();return(h,n)=>(b(),v(j,null,[e(F,null,{default:p(()=>[e(D,{title:a(d)},{main:p(()=>[s("div",I,[e(a(B),{class:"w-full shadow-sm border border-border/40"},{default:p(()=>[e(a(O),null,{default:p(()=>[e(a(V),{class:"text-lg font-semibold"},{default:p(()=>[...n[5]||(n[5]=[x("Data Warning",-1)])]),_:1})]),_:1}),e(a(J),null,{default:p(()=>[s("form",{onSubmit:n[4]||(n[4]=C((...t)=>a(m)&&a(m)(...t),["prevent"])),class:"grid grid-cols-2 gap-4"},[s("div",U,[e(W,{error:a(l).errors.jalan_id,label:"Pilih Jalan",value:a(l).jalan_id,"onUpdate:modelValue":n[0]||(n[0]=t=>a(l).jalan_id=Number(t?.value)),options:a(f).map(t=>({value:t.id.toString(),name:t.nama_jalan}))},null,8,["error","value","options"])]),s("div",q,[e(o,{label:"Kode",placeholder:"Insert Kode",name:"kode",form:a(l)},null,8,["form"])]),s("div",z,[e(o,{label:"Jenis Simpang",placeholder:"Jenis Simpang",name:"jenis_simpang",form:a(l)},null,8,["form"])]),s("div",G,[e(y,{"can-nullable":!0,onOnChange:n[1]||(n[1]=t=>{a(l).lokasi=t?t.value:null}),placeholder:"Pilih Lokasi ",value:a(l).lokasi?a(l).lokasi.toString():null,options:a(r),label:"Lokasi"},null,8,["value","options"])]),s("div",H,[e(o,{label:"Tahun Pemasangan",type:"number",placeholder:"Tahun Pemasangan",name:"tahun_pemasangan",form:a(l)},null,8,["form"])]),s("div",Q,[e(o,{label:"Latitude",type:"text",placeholder:"Latitude",name:"latitude",form:a(l)},null,8,["form"])]),s("div",R,[e(o,{label:"Longitude",type:"text",placeholder:"Longitude",name:"longitude",form:a(l)},null,8,["form"])]),s("div",X,[e(y,{"can-nullable":!0,onOnChange:n[2]||(n[2]=t=>{a(l).pengaturan_fase=t.value?Number(t.value):void 0}),placeholder:"Pilih Pengaturan Fase",value:a(l).pengaturan_fase?a(l).pengaturan_fase.toString():null,options:a(i),label:"Pengaturan Fase"},null,8,["value","options"])]),s("div",Y,[e(o,{type:"text",label:"Tipe Tiang",placeholder:"Tipe Tiang",name:"tipe_tiang",form:a(l)},null,8,["form"])]),s("div",Z,[n[7]||(n[7]=s("p",null," Data Kondisi Lampu ",-1)),s("ul",aa,[(b(!0),v(j,null,K(a(_),(t,$)=>(b(),v("li",{class:"flex items-center space-x-2",key:t},[s("label",null,S(t),1),n[6]||(n[6]=s("span",null," : ",-1)),e(o,{type:"number",placeholder:"Durasi",name:`list_lampu.${$}.durasi`,form:a(l)},null,8,["name","form"])]))),128))])]),s("div",la,[e(y,{"can-nullable":!0,onOnChange:n[3]||(n[3]=t=>a(l).kondisi=t?.value),placeholder:"Pilih Kondisi",value:a(l).kondisi?a(l).kondisi.toString():null,options:a(c),label:"Kondisi"},null,8,["value","options"])]),s("div",sa,[e(o,{type:"text",label:"Keterangan",placeholder:"Keterangan",name:"keterangan",form:a(l)},null,8,["form"])]),s("div",ea,[e(a(N),{type:"submit",class:"px-6",disabled:a(l).processing},{default:p(()=>[x(S(a(l).processing?"Menyimpan...":"Simpan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1},8,["title"])]),_:1}),n[8]||(n[8]=s("div",null,null,-1))],64))}});export{$a as default};
