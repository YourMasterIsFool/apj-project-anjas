import{C as S,p as g,D as $,A as T,E as P,d as L,c as b,a as e,b as l,w as p,u as a,g as h,y as w,o as v,F as k,B as C,t as x}from"./app-aI6uW76n.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bt_UKpVf.js";import{_ as F}from"./MainCard.vue_vue_type_script_setup_true_lang-C5wIb8HK.js";import{_ as o}from"./FormInput.vue_vue_type_script_setup_true_lang-BVjkPI7O.js";import{_ as D}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DJUDR0pw.js";import{_ as N,a as B,b as O,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-BTKpwgax.js";import{l as J,a as E}from"./listLokasi-K6I4t6oy.js";import{l as M}from"./listPengaturanFase-D8FFUacD.js";import{_ as y}from"./FormSelect.vue_vue_type_script_setup_true_lang-CP3WUAIm.js";import{_ as A}from"./AsyncSelect.vue_vue_type_script_setup_true_lang-CpP_Nodh.js";import"./useForwardExpose-Dl8OZRXt.js";import"./VisuallyHidden-CaVx141i.js";import"./RovingFocusGroup-icl2bxcL.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-4Ns3tNZl.js";import"./createLucideIcon-Bd87fpWk.js";import"./Label.vue_vue_type_script_setup_true_lang-C7FKkONw.js";import"./Input.vue_vue_type_script_setup_true_lang-DTxJfGRN.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-C3U-ui5Y.js";import"./check-DOdhT06l.js";import"./VisuallyHiddenInput-DiBS6qkp.js";function I(){const u=S(),m=g(()=>u.props.lamp_types)??[],s=g(()=>u.props.data),d=g(()=>u.props.list_jalan),i=$({lokasi:"",kode:"",jalan_id:null,jenis_simpang:"",tahun_pemasangan:0,latitude:"",longitude:"",pengaturan_fase:null,tipe_tiang:"",keterangan:"",list_lampu:[...m.value.map(r=>({type:r,durasi:0}))]}),c=T("Create Traffic"),_=async()=>{s.value?.id==null?(console.log("post"),i.post("/lalin/traffic/")):i.put("/lalin/traffic/"+s.value?.id)};return console.log(s),P(()=>u.props.data,r=>{if(r){const f=r;i.defaults(r),Object.assign(i,f)}},{immediate:!0}),{form:i,onSubmit:_,title:c,data:s,list_lampu:m,list_pengaturan_fase:M,list_kondisi:E,list_jalan:d,list_lokasi:J}}const U={class:"bg-muted/40 w-full"},q={class:"col-span-2 space-y-1"},z={class:"col-span-2 space-y-1"},G={class:"col-span-2 space-y-1"},H={class:"col-span-2 space-y-1"},Q={class:"space-y-1 col-span-2"},R={class:"space-y-1 col-span-2"},W={class:"space-y-1 col-span-2"},X={class:"space-y-1 col-span-2"},Y={class:"space-y-1 col-span-2"},Z={class:"space-y-1 col-span-2"},aa={class:"grid grid-cols-1 gap-2"},sa={class:"space-y-1 col-span-2"},la={class:"space-y-1 col-span-2"},ea={class:"col-span-2 flex justify-end pt-2"},Pa=L({__name:"Form",setup(u){const{onSubmit:m,form:s,title:d,list_pengaturan_fase:i,list_lampu:c,list_kondisi:_,list_jalan:r,list_lokasi:f}=I();return(na,n)=>(v(),b(k,null,[e(K,null,{default:p(()=>[e(F,{title:a(d)},{main:p(()=>[l("div",U,[e(a(N),{class:"w-full shadow-sm border border-border/40"},{default:p(()=>[e(a(B),null,{default:p(()=>[e(a(O),{class:"text-lg font-semibold"},{default:p(()=>[...n[5]||(n[5]=[h("Data Traffic",-1)])]),_:1})]),_:1}),e(a(V),null,{default:p(()=>[l("form",{onSubmit:n[4]||(n[4]=w((...t)=>a(m)&&a(m)(...t),["prevent"])),class:"grid grid-cols-2 gap-4"},[l("div",q,[e(A,{error:a(s).errors.jalan_id,label:"Pilih Jalan",value:a(s).jalan_id,"onUpdate:modelValue":n[0]||(n[0]=t=>a(s).jalan_id=Number(t?.value)),options:a(r).map(t=>({value:t.id.toString(),name:t.nama_jalan}))},null,8,["error","value","options"])]),l("div",z,[e(o,{label:"Kode",placeholder:"Insert Kode",name:"kode",form:a(s)},null,8,["form"])]),l("div",G,[e(o,{label:"Jenis Simpang",placeholder:"Jenis Simpang",name:"jenis_simpang",form:a(s)},null,8,["form"])]),l("div",H,[e(y,{"can-nullable":!0,onOnChange:n[1]||(n[1]=t=>{a(s).lokasi=t?t.value:null}),placeholder:"Pilih Lokasi ",value:a(s).lokasi?a(s).lokasi.toString():null,options:a(f),label:"Lokasi"},null,8,["value","options"])]),l("div",Q,[e(o,{label:"Tahun Pemasangan",type:"number",placeholder:"Tahun Pemasangan",name:"tahun_pemasangan",form:a(s)},null,8,["form"])]),l("div",R,[e(o,{label:"Latitude",type:"text",placeholder:"Latitude",name:"latitude",form:a(s)},null,8,["form"])]),l("div",W,[e(o,{label:"Longitude",type:"text",placeholder:"Longitude",name:"longitude",form:a(s)},null,8,["form"])]),l("div",X,[e(y,{"can-nullable":!0,onOnChange:n[2]||(n[2]=t=>{a(s).pengaturan_fase=t.value?Number(t.value):void 0}),placeholder:"Pilih Pengaturan Fase",value:a(s).pengaturan_fase?a(s).pengaturan_fase.toString():null,options:a(i),label:"Pengaturan Fase"},null,8,["value","options"])]),l("div",Y,[e(o,{type:"text",label:"Tipe Tiang",placeholder:"Tipe Tiang",name:"tipe_tiang",form:a(s)},null,8,["form"])]),l("div",Z,[n[7]||(n[7]=l("p",null," Data Kondisi Lampu ",-1)),l("ul",aa,[(v(!0),b(k,null,C(a(c),(t,j)=>(v(),b("li",{class:"flex items-center space-x-2",key:t},[l("label",null,x(t),1),n[6]||(n[6]=l("span",null," : ",-1)),e(o,{type:"number",placeholder:"Durasi",name:`list_lampu.${j}.durasi`,form:a(s)},null,8,["name","form"])]))),128))])]),l("div",sa,[e(y,{"can-nullable":!0,onOnChange:n[3]||(n[3]=t=>a(s).kondisi=t?.value),placeholder:"Pilih Kondisi",value:a(s).kondisi?a(s).kondisi.toString():null,options:a(_),label:"Kondisi"},null,8,["value","options"])]),l("div",la,[e(o,{type:"text",label:"Keterangan",placeholder:"Keterangan",name:"keterangan",form:a(s)},null,8,["form"])]),l("div",ea,[e(a(D),{type:"submit",class:"px-6",disabled:a(s).processing},{default:p(()=>[h(x(a(s).processing?"Menyimpan...":"Simpan"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1},8,["title"])]),_:1}),n[8]||(n[8]=l("div",null,null,-1))],64))}});export{Pa as default};
